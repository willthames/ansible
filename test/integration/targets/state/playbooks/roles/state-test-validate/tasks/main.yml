- name: lookup file
  stat:
    path: "{{ tempdir }}/state_file_2"
  register: stat_file_2

- debug:
    var: state

- debug:
    var: stat_file_2

- name: assert that file 2 has correct state
  assert:
    that:
      - (state == 'present')|ternary(stat_file_2.stat.exists, not stat_file_2.stat.exists)
